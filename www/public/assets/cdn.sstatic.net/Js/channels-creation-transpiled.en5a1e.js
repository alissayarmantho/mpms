"use strict";var StackOverflow;!function(t){var e;!function(t){var e;!function(e){e.UnitedStatesCountryCode="US";var n=function(){function e(t){this.props=t,this.countriesWithoutPostcodes=["AO","AG","AW","BS","BZ","BJ","BW","BF","BI","CM","CF","KM","CG","CD","CK","CI","DJ","DM","GQ","ER","FJ","TF","GM","GH","GD","GN","GY","HK","IE","JM","KE","KI","MO","MW","ML","MR","MU","MS","NR","AN","NU","KP","PA","QA","RW","KN","LC","ST","SA","SC","SL","SB","SO","ZA","SR","SY","TZ","TL","TK","TO","TT","TV","UG","AE","VU","YE","ZW"]}return Object.defineProperty(e.prototype,"$countryDropdown",{"get":function(){return $(".js-country-container select",this.props.$container)},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$stateDropdown",{"get":function(){return $(".js-state-container select",this.props.$container)},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$stateTextbox",{"get":function(){return $(".js-state-container input",this.props.$container)},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$postcodeTextbox",{"get":function(){return $(".js-postcode-container input",this.props.$container)},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$billingStateHiddenInput",{"get":function(){return $(".js-copy-state-dropdown",this.props.$container)},"enumerable":!0,"configurable":!0}),e.prototype.bind=function(){this.setupStateDropdown(this.props.stateLookup,this.props.onlyRequireStatesFor)},e.prototype.unbind=function(){this.$stateDropdown.off()},e.prototype.setupStateDropdown=function(e,n){var r=this,o=this.$stateTextbox.attr("name");this.$stateDropdown.on("change",function(){o&&(r.$stateDropdown.attr("name",o),r.$stateTextbox.removeAttr("name"))}),this.$countryDropdown.on("change",function(){var i=r.$countryDropdown.val(),a=e[i],s=!1,c=!1;null===n&&a||null!==n&&n.indexOf(i)>=0?(c=!0,r.$stateDropdown.attr("name",o),r.$stateTextbox.removeAttr("name"),r.$billingStateHiddenInput.attr("name",r.$billingStateHiddenInput.data("name")),$("option:gt(0)",r.$stateDropdown).remove(),$.each(a,function(t,e){r.$stateDropdown.append($("<option></option>").attr("value",e.Code).text(e.Name))}),r.$stateDropdown.val("")):(s=!0,r.$stateTextbox.attr("name",o),r.$stateDropdown.removeAttr("name"),r.$billingStateHiddenInput.removeAttr("name")),r.$stateDropdown.parent().toggleClass("s-select",c),r.$stateTextbox.toggleClass("d-none",!s),r.$stateDropdown.toggleClass("d-none",!c),s?r.$stateTextbox.attr("required","true"):r.$stateTextbox.removeAttr("required"),c?r.$stateDropdown.attr("required","true"):r.$stateDropdown.removeAttr("required"),r.countriesWithoutPostcodes.indexOf(i)>=0?(r.$postcodeTextbox.removeAttr("required").val(""),t.Validation.ClearValidationError(r.$postcodeTextbox)):r.$postcodeTextbox.attr("required","true"),r.props.onCountryChanged()})},e.showHideStateAndZip=function(t,e,n){var r=e.val(),o=n.find(".js-state-container input"),i=n.find(".js-postcode-container input"),a=n.find(".js-copy-zip");t.indexOf(r)>=0?(i.attr("name",i.data("name")),a.attr("name",a.data("name")),n.find(".js-state-zip-container").removeClass("d-none")):(o.removeAttr("name"),i.removeAttr("name"),a.removeAttr("name"),n.find(".js-state-zip-container").addClass("d-none"))},e.copyShippingToBilling=function(t){var e=t.find(".js-copy-target input"),n=t.find(".js-tax-fields-container");e.each(function(t,e){var r=$(e),o=r.data("key"),i=$("[data-key='"+o+"']",n);i[0].hasAttribute("name")&&r.val(i.val())})},e}();e.AddressForm=n}(e=t.Channels||(t.Channels={}))}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e;!function(e){var n=function(){function e(e){var n=this;this.createValidators=function(e){e instanceof Element&&(e=$(e));var r=e.attr("name");if(!r)return null;if(!n._props.shouldValidate(r))return null;var o=t.Validation.createValidators(e),i=e.data("type");return"credit-card"===i&&(o.creditCard=!0),"cvv"===i&&(o.cvv=!0),("month"===i||"year"===i)&&(o.expiryDate=!0),o},this._props=e,this._validationResults={}}return Object.defineProperty(e.prototype,"$container",{"get":function(){return this._props.$container},"enumerable":!0,"configurable":!0}),e.prototype.getFromContainer=function(t){return $(t,this.$container)},Object.defineProperty(e.prototype,"$form",{"get":function(){return this.$container.is("form")?this.$container:this.getFromContainer("form")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$btnSubmit",{"get":function(){return this.getFromContainer(".js-submit")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$btnBack",{"get":function(){return this.getFromContainer(".js-back-btn")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$fields",{"get":function(){return this.getFromContainer("input,select")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$fieldsWithMaxLength",{"get":function(){return this.$fields.filter("[maxlength]").not(".js-maxlength-no-message")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$validationSummary",{"get":function(){return this.getFromContainer(".js-validation-summary")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$businessSeatCountInput",{"get":function(){return this.getFromContainer(".js-business-seat-count")},"enumerable":!0,"configurable":!0}),e.prototype.bind=function(){var e=this;this.$btnSubmit.click(function(n){return t.Util.noNavClick(n,function(){return e.onSubmit()})}),this.$fields.on("focusout change",function(t){return e.validateOnChange(t)}),this.$fieldsWithMaxLength.on("paste keyup",function(t){return e.updateCharCounters(t)}),this.$businessSeatCountInput.on("focusout change",function(t){return e.validateSeatCount(t)})},e.prototype.unbind=function(){this.$btnSubmit.off("click"),this.$fields.off("focusout change"),this.$fieldsWithMaxLength.off("paste keyup")},e.prototype.validate=function(e){void 0===e&&(e=!1);var n=this.$form.get(0),r=t.Validation.createValidatorsForForm(n,this.createValidators),o=this.serializeForm(n),i=validate(o,r,{"fullMessages":!1})||{},a=Object.keys(i),s=0==a.length;for(var c in r)this._validationResults[c]=void 0===i[c];if(!e){for(var u=0,l=a;u<l.length;u++){var p=l[u];this._props.onValidationFailed(p,i[p])}for(var d=a.reduce(function(t,e){return t.concat($("[name='"+e+"']").get(0))},new Array),f=0,h=d;f<h.length;f++){var g=h[f],m=$(g),b=m.name,v=this.getErrorFromValidateResults(i,b);t.Validation.AssignStacksErrorToParent(g,s,v)}s||d[0].scrollIntoView(),this.$btnSubmit.enable(s)}return this._props.log(this._validationResults),s},e.prototype.submitInProgress=function(t){var e=this.$btnSubmit.data(t?"inprogress-text":"default-text");this.$btnSubmit.add(this.$btnBack).enable(!t),this.$btnSubmit.toggleClass("is-loading",t).text(e)},e.prototype.showValidationSummary=function(t,e){var n=this;void 0===e&&(e=null),this.$validationSummary.empty();var r=e?"":"mb0";if(this.$validationSummary.append('<p class="fs-body2 fw-bold '+r+'">'+t+"</p>"),e){var o=$("<ul></ul>");e.forEach(function(t){o.append("<li>"+t+"</li>")}),this.$validationSummary.append(o)}this.$validationSummary.fadeIn("fast",function(){return n.$validationSummary.scrollIntoView()})},e.prototype.validateOnChange=function(e){var n,r;try{var o=$(e.target),i=o.attr("name");if(!i||!this._props.shouldValidate(i))return;var a=t.Validation.IsValidationError(o),s=o.is("[type=checkbox]")?o.is(":checked"):o.val(),c=(n={},n[i]=this.createValidators(o),n),u=(r={},r[i]=s,r),l=validate(u,c,{"fullMessages":!1})||{},p=this._validationResults[i]=0==Object.keys(l).length;p||a||(this._props.log(this._validationResults),this._props.onValidationFailed(i,s));var d=this.getErrorFromValidateResults(l,i);t.Validation.AssignStacksErrorToParent(o,p,d)}finally{this.$btnSubmit.enable(!this.hasValidationErrors())}},e.prototype.getErrorFromValidateResults=function(t,e){var n=t[e];return n instanceof Array?n[0]:n},e.prototype.updateCharCounters=function(t){var e=$(t.target),n=parseInt(e.attr("maxlength"),10),r=e.val().length,o=r>=n-20,i=e.closest(".js-validation-container"),a=i.find(".s-input-message");i.toggleClass("has-warning",o),a.text(o?r+" / "+n:"")},e.prototype.validateSeatCount=function(t){var e=$(t.target),n=parseInt(e.val()),r=StackExchange.settings.subscriptions.defaultMaxTrueUpSeats,o=0>=n||n>r,i=e.closest(".js-validation-container"),a=i.find(".s-input-icon"),s=i.find(".s-input-message"),c=$('<a href="mailto:teams-support@stackoverflow.com">Contact support</a>'),u="Teams over "+r+" are available through our support team. ";0>=n&&(u="Please enter 1 or more users"),i.toggleClass("has-error",o),a.toggleClass("d-none",!o),s.text(o?u:""),n>r&&s.append(c)},e.prototype.hideValidationSummary=function(){this.$validationSummary.fadeOut("fast")},e.prototype.onSubmit=function(){this.$btnSubmit.is(":disabled")||(this._props.beforeSubmit(),this.validate()&&(this.submitInProgress(!0),this.hideValidationSummary(),this._props.performSubmit()))},e.prototype.hasValidationErrors=function(){for(var t in this._validationResults)if(this._props.shouldValidate(t)&&!this._validationResults[t])return!0;return!1},e.prototype.serializeForm=function(t){var e=validate.collectFormValues(t);for(var n in e)this._props.shouldValidate(n)||delete e[n];return e},e.rebindValidators=function(t){t._billingForm=new e({"$container":t.$form,"beforeSubmit":function(){return t.beforeSubmit()},"performSubmit":function(){return t.performSubmit()},"shouldValidate":function(e){return t.shouldValidate(e)},"log":function(e){return t.log(e)},"onValidationFailed":function(e,n){return t.onValidationFailed(e,n)}}),t._billingForm.validate(!0),t._billingForm.bind()},e}();e.BillingForm=n}(e=t.Channels||(t.Channels={}))}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t){var e=this;this.validateExpirationDate=function(){var t=new Date,n=t.getMonth()+1,r=t.getFullYear(),o=parseInt(e.$expiryMonth.val(),10),i=parseInt(e.$expiryYear.val(),10),a=[],s=!1;return isNaN(o)||isNaN(i)?s=!0:i===r&&n>o?s=e.$expiryYear.data("focused"):r>i&&(s=!0),s&&a.push("Invalid expiration date"),a},this.validateCreditCard=function(){function t(t){for(var e=0,n=!1,r=0,o=t.length-1;o>=0;o--)e=parseInt(t.charAt(o),10),n&&(e*=2)>9&&(e-=9),r+=e,n=!n;return r%10===0}var n=e._ccFormatter.getRawValue(),r=e._ccType,o=[],i=["visa","amex","mastercard","diners","discover","jcb","dankort"];if(r&&"unknown"!==r&&-1!==i.indexOf(r))if(t(n)){var a=void 0;switch(r){case"amex":a=[15];break;case"visa":case"discover":case"jcb":case"dankort":a=[16,19];break;case"mastercard":a=[16];break;case"diners":a=[14,15,16,17,18,19]}-1===a.indexOf(n.length)&&o.push("Invalid card number")}else o.push("Invalid card number");else o.push("We support Amex, Mastercard, Visa, JCB, Diners Club, Discover or Dankort");return o},this.validateCvv=function(){var t=e._cvvFormatter.getRawValue(),n=e._ccType,r=[];return"amex"==n?4!=t.length&&r.push("Invalid CVV"):3!=t.length&&r.push("Invalid CVV"),r},this._props=t,this.initFormatters()}return Object.defineProperty(t.prototype,"$ccNumber",{"get":function(){return this.getFromContainer(".js-cc-number")},"enumerable":!0,"configurable":!0}),Object.defineProperty(t.prototype,"$cvv",{"get":function(){return this.getFromContainer(".js-cvv")},"enumerable":!0,"configurable":!0}),Object.defineProperty(t.prototype,"$expiryMonth",{"get":function(){return this.getFromContainer(".js-expiry-month")},"enumerable":!0,"configurable":!0}),Object.defineProperty(t.prototype,"$expiryYear",{"get":function(){return this.getFromContainer(".js-expiry-year")},"enumerable":!0,"configurable":!0}),t.prototype.getFromContainer=function(t){return $(t,this._props.$container)},t.prototype.bind=function(){var t=this;validate.validators.creditCard=this.validateCreditCard,validate.validators.cvv=this.validateCvv,validate.validators.expiryDate=this.validateExpirationDate;var e=new Date,n=e.getMonth()+1;this.$expiryMonth.val(n),this.$expiryYear.focus(function(){return t.$expiryYear.data("focused",!0)})},t.prototype.unbind=function(){delete validate.validators.creditCard,delete validate.validators.cvv,delete validate.validators.expiryDate,this.$expiryYear.off("focus")},t.prototype.initFormatters=function(){var t=this;this._ccFormatter=new Cleave(this.$ccNumber.get(0),{"creditCard":!0,"onCreditCardTypeChanged":function(e){e!==t._ccType&&t._props.log("cc type changed from ["+t._ccType+"] to ["+e+"]"),t._ccType=e}}),this._cvvFormatter=new Cleave(this.$cvv.get(0),{"numeral":!0,"numeralThousandsGroupStyle":"none","numeralDecimalScale":0,"stripLeadingZeroes":!1})},t}();t.CreditCardForm=e}(e=t.Channels||(t.Channels={}))}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(){function n(t){this._model=t,this.init(),this.showErrors(t.Errors),this.log("ready")}return n.ready=function(t){if(!n.currentPage){var r=null;switch(t.Step){case 1:r=new e.EmailPage(t);break;case 2:r=new e.SelectPlanPage(t);break;case 3:r=new e.ChannelNamePage(t);break;case 4:r=new e.BillingPage(t);break;case 5:r=new e.VerifyEmailPage(t)}n.currentPage=r}},Object.defineProperty(n.prototype,"$wizardBody",{"get":function(){return $("#js-wizard-body")},"enumerable":!0,"configurable":!0}),n.prototype.log=function(e){t.Util.log(this.pageName,e)},n.prototype.xhrComplete=function(){this._inFlightXhr=null,this.$wizardBody.find(".is-loading").removeClass("is-loading")},n.prototype.textboxHasValue=function(t){return!!$.trim(t.val())},n.prototype.clearErrors=function(){this.$wizardBody.find(".has-error").each(function(t,e){var n=$(e);n.find(".js-toggle-dno-on-error").addClass("dno"),n.find(".js-error-message").html(""),n.removeClass("has-error")})},n.prototype.showErrors=function(t,e){if(t&&t.length){var n=null;e&&(n=parseInt(e.data("error-field")));for(var r=0;r<t.length;r++){var o=t[r];if(null!=n){if(n==o.ErrorField){this.showError(o,e);break}}else this.showError(o)}}},n.prototype.showError=function(t,e){if(e=e||this.$wizardBody.find(".js-can-error[data-error-field="+t.ErrorField+"]"),!e.length)return this.log("showError unable to find field "+t.ErrorField+" for message "+t.ErrorMessage),void 0;var n=e.closest(".js-toggle-has-error").addClass("has-error");n.find(".js-toggle-dno-on-error").removeClass("dno"),n.find(".js-error-message").html(t.ErrorMessage)},n}();e.WizardPageBase=n}(n=e.Creation||(e.Creation={}))}(e=t.Channels||(t.Channels={}))}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var __extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{"__proto__":[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),StackOverflow;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){var r=function(n){function r(t){var e=this;return r.IsCreation=t.IsCreation,r.IsPremium=t.IsPremium,e=n.call(this,t)||this}return __extends(r,n),Object.defineProperty(r.prototype,"pageName",{"get":function(){return"BillingPage"},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"billingModel",{"get":function(){return this._model},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$form",{"get":function(){return $("#mainForm")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$submit",{"get":function(){return $("#btnSubmit")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$productHandle",{"get":function(){return $("#productHandle")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$componentId",{"get":function(){return $("#componentId")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$quantity",{"get":function(){return $("#quantity")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$subscriptionType",{"get":function(){return $(".js-subscriptionType")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$errorContainer",{"get":function(){return $(".js-validation-summary")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$monthlyBillingBox",{"get":function(){return $(".js-monthly-billing-cycle")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$annualBillingBox",{"get":function(){return $(".js-annual-billing-cycle")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$businessSeatCount",{"get":function(){return $(".js-business-seat-count")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$contactInfoForm",{"get":function(){return $("#contactInfo")},"enumerable":!0,"configurable":!0}),Object.defineProperty(r.prototype,"$contactInfoCountry",{"get":function(){return $(".js-country-container select",this.$contactInfoForm)},"enumerable":!0,"configurable":!0}),r.prototype.init=function(){var t=this;r.IsCreation&&window.history.replaceState({},document.title,"/teams/create/billing"),this._billingForm=new e.BillingForm({"$container":this.$form,"beforeSubmit":function(){return t.beforeSubmit()},"performSubmit":function(){return t.performSubmit()},"shouldValidate":function(e){return t.shouldValidate(e)},"log":function(e){return t.log(e)},"onValidationFailed":function(e,n){return t.onValidationFailed(e,n)}}),this._creditCardForm=new e.CreditCardForm({"$container":this.$form,"log":function(e){return t.log(e)}}),this._promoWidget=new o({"subscriptionType":function(){return t.$subscriptionType.filter(":checked").val()}}),this._contactForm=new e.AddressForm({"$container":this.$contactInfoForm,"log":function(e){return t.log(e)},"onCountryChanged":function(){return t._billingForm.validate(!0)},"onlyRequireStatesFor":[e.UnitedStatesCountryCode],"stateLookup":this.billingModel.StateLookup}),this._billingForm.bind(),this._creditCardForm.bind(),this._promoWidget.bind(),this._billingForm.validate(!0),r.IsPremium?this.$businessSeatCount.change(function(e){return t.onBusinessSeatCountChanged(e)}):(this.$subscriptionType.change(function(){return t.onSubscriptionTypeChanged(!0)}),this.onSubscriptionTypeChanged()),this._contactForm.bind();var n=[e.UnitedStatesCountryCode];this.$contactInfoCountry.on("change",function(){e.AddressForm.showHideStateAndZip(n,t.$contactInfoCountry,t.$contactInfoForm),e.BillingForm.rebindValidators(t)}),this.$contactInfoCountry.val()&&this.$contactInfoCountry.change(),this.$errorContainer.is(":visible")&&this.$errorContainer.scrollIntoView()},r.prototype.onBusinessSeatCountChanged=function(t){var e=$(t.target),n=parseInt(e.val()),r=n*e.data("seat-price");n>0&&(this.$quantity.val(n),$(".js-business-annual-cost").text(r.toLocaleString("en-US")))},r.prototype.onSubscriptionTypeChanged=function(t){void 0===t&&(t=!1);var e=this.$subscriptionType.filter(":checked"),n=e.val(),r=e.data("product"),o=e.data("component");this.log("subscriptionTypeChange now "+n+" ("+r+")"),this.$productHandle.val(r),this.$componentId.val(o);var i=!1,a=!1;switch(n){case"Annual":i=!0;break;case"Monthly":a=!0;break;default:this.log("Cannot identify subscription type '"+n+"'")}a?(this.$monthlyBillingBox.addClass("bc-blue-2 bs-ring"),this.$annualBillingBox.removeClass("bc-blue-2 bs-ring")):(this.$monthlyBillingBox.removeClass("bc-blue-2 bs-ring"),this.$annualBillingBox.addClass("bc-blue-2 bs-ring")),$(".js-product-annual").toggleClass("d-none",!i),$(".js-product-monthly").toggleClass("d-none",!a),t&&(this._promoWidget.hasUserEnteredCode?this._promoWidget.validateAndApply():this._promoWidget.clear())},r.prototype.shouldValidate=function(t){return 0==t.length?!1:t.indexOf("secure")>=0?!1:t.indexOf("metafields")>=0||t.indexOf("components")>=0?!1:!0},r.prototype.onValidationFailed=function(t,e){this.gpsTrackValidationError(t,e)},r.prototype.gpsTrackValidationError=function(t,e){StackExchange.using("gps",function(){var n=$("[name='"+t+"']").data("error-field"),r={"Field":n,"ErrorType":e?2:1};r.Field&&r.ErrorType&&StackExchange.gps.track("teams.create.billing.validation.error",r,!0)})},r.prototype.gpsTrackCreateClick=function(){StackExchange.using("gps",function(){var t={"HasSameBillingAddress":!0};StackExchange.gps.track("teams.create.billing.click",t)})},r.prototype.beforeSubmit=function(){e.AddressForm.copyShippingToBilling(this.$contactInfoForm)},r.prototype.performSubmit=function(){r.IsCreation?(this.gpsTrackCreateClick(),this.finalCheckBeforeSubscription()):this.paymentMethodSaveStateBeforeChargifyDirect()},r.prototype.finalCheckBeforeSubscription=function(){var e=this,n="/teams/create/billing/final-check-before-subscription";$.ajax({"type":"POST","url":n,"data":{"fkey":t.Current.User.fkey},"success":function(t){if(e.log("POST "+n+" success"),t.Errors&&t.Errors.length>0){var r=t.Errors.map(function(t){return t.ErrorMessage});e.showSubmitErrorsInAlertBox(r),e._billingForm.submitInProgress(!1),e.$submit.disable()}else e.$form.submit()},"error":function(t,r,o){e.log("Ajax error hitting "+n),e.log(t),e.log(r),e.log(o),e.showNonSpecificError(),e._billingForm.submitInProgress(!1)}})},r.prototype.paymentMethodSaveStateBeforeChargifyDirect=function(){var e=this,n="/admin/billing/plan/save-state-before-chargify-direct",r=function(t,n){return void 0===n&&(n="input"),e.$contactInfoForm.find(n+'[name="customer['+t+']"]').val()},o={"UpgradeSubscriptionType":$('input[name="subscriptionType"]:checked').val(),"ContactFirstName":r("first_name"),"ContactLastName":r("last_name"),"OrganizationName":r("organization"),"BillingEmail":r("email"),"CountryCode":r("country","select"),"StateCode":r("state","select"),"ZipCode":r("zip"),"PromoCode":this.$form.find('input[name="signup[coupon_code]"]').val()};o.fkey=t.Current.User.fkey,$.ajax({"type":"POST","url":n,"data":o,"success":function(t){if(e.log("POST "+n+" success"),t.Errors&&t.Errors.length>0){var r=t.Errors.map(function(t){return t.ErrorMessage});e.showSubmitErrorsInAlertBox(r)}else e.clearInputNames(),e.$form.submit()},"error":function(t,r,o){e.log("Ajax error hitting "+n),e.log(t),e.log(r),e.log(o),e.showNonSpecificError()},"complete":function(){e._billingForm.submitInProgress(!1)}})},r.prototype.showSubmitErrorsInAlertBox=function(t){this._billingForm.showValidationSummary("There was a problem creating your Team:",t)},r.prototype.showNonSpecificError=function(){this._billingForm.showValidationSummary("There was a error creating your Team. Please contact support.")},r.prototype.clearInputNames=function(){this.$form.find(".js-clear-input-names *[name]").attr("name","")},r.IsCreation=!0,r.IsPremium=!0,r}(n.WizardPageBase);n.BillingPage=r;var o=function(){function e(t){this.props=t}return e.prototype.bind=function(){var e=this;this.$txtCode.on("change keyup paste",function(){return e.$btnApplyOrRemove.prop("disabled",!e.hasUserEnteredCode)}),this.hasUserEnteredCode&&this.validateAndApply(),this.$btnApplyOrRemove.click(function(n){return t.Util.noNavClick(n,function(){return e.applyOrRemove()})}),this.setApplyOrRemoveButtonText()},e.prototype.unbind=function(){this.$txtCode.off("change keyup paste"),this.$btnApplyOrRemove.off("click")},Object.defineProperty(e.prototype,"$form",{"get":function(){return $("#promo-form")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$txtCode",{"get":function(){return $("#promo-txtCode")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$btnApplyOrRemove",{"get":function(){return $("#promo-btnApplyOrRemove")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$verifiedDesc",{"get":function(){return $("#promo-verifiedDesc")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"$hdnVerifiedCode",{"get":function(){return $("#promo-hdnVerifiedCode")},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"hasUserEnteredCode",{"get":function(){return $.trim(this.$txtCode.val()).length>0},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"hasValidCode",{"get":function(){return $.trim(this.$hdnVerifiedCode.val()).length>0},"enumerable":!0,"configurable":!0}),e.prototype.applyCoupon=function(t){this.clear(!1),t.IsValid?(this.$form.addClass("has-success"),this.$form.find(".js-check").removeClass("d-none"),this.$hdnVerifiedCode.val(t.Code),this.$verifiedDesc.append("<strong>"+t.Name+"</strong>: "+t.Description+" "),this.$txtCode.prop("disabled",!0),this.log(t.Code+" applied")):(this.$form.addClass("has-error"),this.$form.find(".js-alert").removeClass("d-none"),this.$verifiedDesc.text(t.InvalidReason)),this.setApplyOrRemoveButtonText()},e.prototype.clear=function(e){void 0===e&&(e=!0),this.clearVerified(),this.$form.removeClass("has-error has-success"),this.$form.find(".js-check, .js-alert").addClass("d-none"),this.$txtCode.prop("disabled",!1),e&&(this.$txtCode.val("").change(),r.IsCreation&&$.post("/teams/creation/remove-coupon",{"fkey":t.Current.User.fkey})),this.setApplyOrRemoveButtonText(),this.log("cleared")},e.prototype.clearVerified=function(){this.$verifiedDesc.empty(),this.$hdnVerifiedCode.val("")},e.prototype.applyOrRemove=function(){this.hasValidCode?(this.clear(),this.$txtCode.focus()):this.validateAndApply()},e.prototype.setApplyOrRemoveButtonText=function(){var t=this.hasValidCode?"remove":"apply";this.$btnApplyOrRemove.text(this.$btnApplyOrRemove.data(t))},e.prototype.validateAndApply=function(){var e=this,n=this.$txtCode.val();if(n){this.$btnApplyOrRemove.addClass("is-loading").prop("disabled",!0);var o={"code":n,"type":this.props.subscriptionType(),"fkey":t.Current.User.fkey};$.ajax({"type":"POST","url":r.IsCreation?"/teams/creation/validate-coupon":"/admin/billing/plan/validate-coupon","data":o,"success":function(t){e.applyCoupon(t),e.log(t)},"error":function(t,n,r){e.log(t),e.log(n),e.log(r),e.applyCoupon({"IsValid":!1,"InvalidReason":"Could not retrieve Coupon status"})},"complete":function(){e.$btnApplyOrRemove.removeClass("is-loading").prop("disabled",!1)}})}},e.prototype.log=function(e){t.Util.log("PromoWidget",e)},e}()}(n=e.Creation||(e.Creation={}))}(e=t.Channels||(t.Channels={}))}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),Object.defineProperty(n.prototype,"$txtName",{"get":function(){return $("#name")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$txtSlug",{"get":function(){return $("#slug")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$chkTerms",{"get":function(){return $("#agreeToTerms")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$btnSubmit",{"get":function(){return this.$wizardBody.find(".js-submit")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$editSlug",{"get":function(){return this.$wizardBody.find(".js-edit-slug")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"pageName",{"get":function(){return"ChannelNamePage"},"enumerable":!0,"configurable":!0}),n.prototype.init=function(){var t=this;this.$txtName.focus(),this.$btnSubmit.click(function(){return t.submit()}),this.$editSlug.on("click",function(t){t.preventDefault(),$(".js-slug-closed, .js-slug-expanded").toggleClass("d-none")}),this.$txtName.on("keypress",function(t){t.charCode>255&&t.preventDefault()}),this.$txtName.on("paste",function(e){var n=e.originalEvent,r=n.clipboardData.getData("Text");r=r.replace(/[^\x00-\xFF]*/g,"").trim(),t.$txtName.val(r),e.preventDefault()}),this.$txtName.typeWatch({"wait":10,"captureLength":-1,"highlight":!1,"callback":function(){t.transcribeNameToSlug(),t.enableSubmitWhenValid()}}),this.$txtSlug.typeWatch({"wait":10,"captureLength":-1,"highlight":!1,"callback":function(){t.$txtSlug.data("stop-transcribing",t.$txtSlug.val()),t.enableSubmitWhenValid()}}),this.$chkTerms.on("change",function(){t.enableSubmitWhenValid()}),this.enableSubmitWhenValid()},n.prototype.enableSubmitWhenValid=function(){var t=this.textboxHasValue(this.$txtName)&&this.textboxHasValue(this.$txtSlug);t&&this.$chkTerms.length&&(t=this.$chkTerms.is(":checked")),this.$btnSubmit.enable(t)},n.prototype.transcribeNameToSlug=function(){if(!this.$txtSlug.data("stop-transcribing")){var e=(this.$txtName.val()||"").replace(/^\s+/g,""),n=t.UrlUtil.friendly(e);this.$txtSlug.val(n)}},n.prototype.submit=function(e){var n=this;if(!this._inFlightXhr){this.$btnSubmit.addClass("is-loading").disable();var r={"ChannelName":this.$txtName.val(),"Slug":this.$txtSlug.val()},o={"fkey":t.Current.User.fkey,"posted":r,"toValidate":e?e.data("error-field"):null};this._inFlightXhr=$.ajax({"type":"POST","url":"/teams/create/name/submit","data":o,"dataType":"json","success":function(t){n.clearErrors(),t.Errors&&t.Errors.length>0?(n.$btnSubmit.enable(),n.showErrors(t.Errors,e)):t.RedirectUrl?window.location.href=t.RedirectUrl:window.location.replace(t.CachedData.NewChannelUrl)},"error":function(){window.location.href="/teams/create/error"},"complete":function(){return n.xhrComplete()}})}},n}(e.WizardPageBase);e.ChannelNamePage=n}(n=e.Creation||(e.Creation={}))}(e=t.Channels||(t.Channels={}))}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),Object.defineProperty(n.prototype,"$formsEmail",{"get":function(){return $(".js-creation-email-form")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$btnScrollToStart",{"get":function(){return $(".js-scroll-wizard-start")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"pageName",{"get":function(){return"EmailPage"},"enumerable":!0,"configurable":!0}),n.prototype.init=function(){var t=this;this.$formsEmail.submit(function(e){e.preventDefault(),t.submit(new r($(e.target)))}),this.$btnScrollToStart.click(function(){return t.scrollWizardStartIntoView()}),window.location.hash&&window.location.hash.indexOf("get-started")>=0&&this.showGettingStartedPopover(400)},n.prototype.scrollWizardStartIntoView=function(){var t=this;$(".js-scroll-from-pricing-target").scrollIntoView({"duration":500,"complete":function(){return t.showGettingStartedPopover()}})},n.prototype.showGettingStartedPopover=function(t){void 0===t&&(t=0);var e=new r($(this.$formsEmail.get(0)));e.$txtEmail.attr("data-action",e.$txtEmail.data("default-action")),setTimeout(function(){e.$txtEmail.focus()},t)},n.prototype.submit=function(e){var n=this;if(!this._inFlightXhr){e.$btnSubmitAdhoc.addClass("is-loading"),e.$btnSubmitAdhoc.disable();var r,o=document.location.search.match(/code=([^&]*)/);o&&(r=decodeURIComponent(o[1]));var i={"RawEmail":e.$txtEmail.val(),"PromoCode":r};this._inFlightXhr=$.ajax({"type":"POST","url":"/teams/create/submit","data":{"fkey":t.Current.User.fkey,"posted":i,"ga_client_id":e.$hidGAClientId.val(),"pageName":e.$hidPageName.val(),"pageUrl":e.$hidPageUrl.val()},"dataType":"json","success":function(t){n.clearErrors(),t.Errors&&t.Errors.length>0?n.showErrors(t.Errors,e.$txtEmail):window.location.href=t.RedirectUrl||"/teams/create/plan"},"error":function(){window.location.href="/teams/create/error"},"complete":function(){n.xhrComplete(),e.$btnSubmitAdhoc.enable().removeClass("is-loading")}})}},n}(e.WizardPageBase);e.EmailPage=n;var r=function(){function t(t){this._$form=t}return Object.defineProperty(t.prototype,"$txtEmail",{"get":function(){return this.findInForm(".js-email-input")},"enumerable":!0,"configurable":!0}),Object.defineProperty(t.prototype,"$hidGAClientId",{"get":function(){return this.findInForm(".js-ga-clientid")
},"enumerable":!0,"configurable":!0}),Object.defineProperty(t.prototype,"$hidPageName",{"get":function(){return this.findInForm(".js-page-name")},"enumerable":!0,"configurable":!0}),Object.defineProperty(t.prototype,"$hidPageUrl",{"get":function(){return this.findInForm(".js-page-url")},"enumerable":!0,"configurable":!0}),Object.defineProperty(t.prototype,"$btnSubmitAdhoc",{"get":function(){return this.findInForm(".js-submit-adhoc")},"enumerable":!0,"configurable":!0}),t.prototype.findInForm=function(t){return this._$form.find(t)},t}()}(n=e.Creation||(e.Creation={}))}(e=t.Channels||(t.Channels={}))}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),Object.defineProperty(n.prototype,"$basicPlan",{"get":function(){return this.$wizardBody.find("#basic-plan")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$businessPlan",{"get":function(){return this.$wizardBody.find("#business-plan")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$enterprisePlan",{"get":function(){return this.$wizardBody.find("#enterprise-plan")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"allPlans",{"get":function(){return[this.$basicPlan,this.$businessPlan,this.$enterprisePlan]},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$btnSubmit",{"get":function(){return this.$wizardBody.find(".js-select-button")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"pageName",{"get":function(){return"SelectPlanPage"},"enumerable":!0,"configurable":!0}),n.prototype.init=function(){var t=this;this.allPlans.forEach(function(e){e.click(function(){return t.selectPlan(e)})}),this.$btnSubmit.click(function(){return t.submit()}),this.$selectedPlan=this.$wizardBody.find(".js-plan-radio:checked").closest(".js-plan"),this.$selectedPlan.length>0?(this.$btnSubmit.enable(),this.highlightPlan(this.$selectedPlan)):this.$btnSubmit.disable()},n.prototype.highlightPlan=function(t){this.allPlans.forEach(function(t){return t.removeClass("bs-ring bg-powder-050")}),t.addClass("bs-ring bg-powder-050")},n.prototype.unhighlightPlan=function(){this.allPlans.forEach(function(t){return t.removeClass("bs-ring bg-powder-050")}),this.$selectedPlan.addClass("bs-ring bg-powder-050")},n.prototype.selectPlan=function(t){this.$selectedPlan=t,t.find(".js-plan-radio").prop("checked",!0).change(),this.highlightPlan(this.$selectedPlan),this.$btnSubmit.enable()},n.prototype.submit=function(){var e=this;if(!this._inFlightXhr){this.$btnSubmit.addClass("is-loading"),this.$btnSubmit.disable();var n={"SelectedTier":this.$selectedPlan.find(".js-plan-radio").val()};this._inFlightXhr=$.ajax({"type":"POST","url":"/teams/create/plan/submit","data":{"fkey":t.Current.User.fkey,"posted":n},"dataType":"json","success":function(t){e.clearErrors(),t.Errors&&t.Errors.length>0?(e.showErrors(t.Errors),e.$btnSubmit.enable()):window.location.href=t.RedirectUrl},"error":function(){window.location.href="/teams/create/error"},"complete":function(){return e.xhrComplete()}})}},n}(e.WizardPageBase);e.SelectPlanPage=n}(n=e.Creation||(e.Creation={}))}(e=t.Channels||(t.Channels={}))}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),Object.defineProperty(n.prototype,"$emailForm",{"get":function(){return this.$wizardBody.find(".js-email-form")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$editEmailLink",{"get":function(){return this.$wizardBody.find(".js-edit-email")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$emailInputField",{"get":function(){return this.$wizardBody.find(".js-email-input")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"$btnSubmit",{"get":function(){return this.$wizardBody.find(".js-submit-email")},"enumerable":!0,"configurable":!0}),Object.defineProperty(n.prototype,"pageName",{"get":function(){return"VerifyEmailPage"},"enumerable":!0,"configurable":!0}),n.prototype.init=function(){var t=this;this.$editEmailLink.click(function(e){return t.showEmailForm(e)}),this.$emailForm.submit(function(e){return t.submit(e)})},n.prototype.showEmailForm=function(t){return t.preventDefault(),this.$emailForm.removeClass("d-none"),!1},n.prototype.submit=function(e){var n=this;if(e.preventDefault(),!this._inFlightXhr){this.$btnSubmit.addClass("is-loading"),this.$btnSubmit.disable();var r={"RawEmail":this.$emailInputField.val()};this._inFlightXhr=$.ajax({"type":"POST","url":"/teams/create/verify/submit","data":{"fkey":t.Current.User.fkey,"posted":r},"dataType":"json","success":function(t){n.clearErrors(),t.Errors&&t.Errors.length>0?(n.showErrors(t.Errors),n.$btnSubmit.enable()):window.location.href=t.RedirectUrl},"error":function(){window.location.href="/teams/create/error"},"complete":function(){return n.xhrComplete()}})}},n}(e.WizardPageBase);e.VerifyEmailPage=n}(n=e.Creation||(e.Creation={}))}(e=t.Channels||(t.Channels={}))}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"Site",{"get":function(){return e._Site||(e._Site=new t.Site)},"enumerable":!0,"configurable":!0}),Object.defineProperty(e,"User",{"get":function(){return e._User||(e._User=new t.User)},"enumerable":!0,"configurable":!0}),Object.defineProperty(e,"isLoggingEnabled",{"get":function(){return StackExchange.options.enableLogging},"enumerable":!0,"configurable":!0}),e}();t.Current=e}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e=function(){function e(){}return Object.defineProperty(e.prototype,"baseHostAddress",{"get":function(){return window.location.hostname},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"routePrefix",{"get":function(){return StackExchange.options.site.routePrefix||null},"enumerable":!0,"configurable":!0}),e.prototype.urlRelative=function(e){if(e||(e="/"),!t.UrlUtil.needsChannelPrefix(e))return e;if(t.UrlUtil.isAbsolute(e)){var n=t.UrlUtil.parseAbsolute(e);return e.replace(n.pathname,this.routePrefix+n.pathname)}return this.routePrefix+e},e}();t.Site=e}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e=function(){function e(){}return e.needsChannelPrefix=function(n){var r=t.Current.Site.routePrefix;if(!r)return!1;if(!n)return!1;if("#"===n[0]||"?"===n[0]||/^javascript\:/.test(n))return!1;var o=n,i=e.parseAbsolute(n);if(i){if(!t.Util.compareStrings(i.hostname,t.Current.Site.baseHostAddress))return!1;o=i.pathname}else o=n;var a=new RegExp("^"+r).test(o);return!a},e.friendly=function(t){return t?t.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""},e.isAbsolute=function(t){var e=new RegExp("^(?:[a-z]+:)?//","i");return e.test(t)},e.isQuestionUrl=function(t){return/https?:\/\/[\w\.:-]+(\/c\/[\w\.:-]+)?\/q(uestions)?\/\d+/i.test(t)},e.looksLikeMailTo=function(t){return t?/^mailto:[-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+$/.test(t):!1},e.parseAbsolute=function(t){if(!e.isAbsolute(t))return null;var n=new RegExp(["^(https?:)?//","(([^:/?#]*)(?::([0-9]+))?)","(/{0,1}[^?#]*)","(\\?[^#]*|)","(#.*|)$"].join(""),"i"),r=t.match(n);if(!r)throw new Error("unable to parse this absolute url: "+t);var o=function(t){return r[t]||null};return{"originalUrl":t,"protocol":o(1),"host":o(2),"hostname":o(3),"port":o(4),"pathname":o(5),"query":o(6),"hash":o(7)}},e}();t.UrlUtil=e}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"id",{"get":function(){return t.seOptionsUser.proxiedUserId||t.seOptionsUser.userId},"enumerable":!0,"configurable":!0}),Object.defineProperty(t.prototype,"fkey",{"get":function(){return t.seOptionsUser.fkey},"enumerable":!0,"configurable":!0}),Object.defineProperty(t.prototype,"isDeveloper",{"get":function(){return t.seOptionsUser&&t.seOptionsUser.isDeveloper},"enumerable":!0,"configurable":!0}),Object.defineProperty(t,"seOptionsUser",{"get":function(){return StackExchange&&StackExchange.options&&StackExchange.options.user?StackExchange.options.user:null},"enumerable":!0,"configurable":!0}),t}();t.User=e}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){t.nameof=function(t){return t};var e=function(){function e(){}return e.arrayEquals=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},e.arrayEqualsIgnoreOrder=function(t,n){if(null==t||null==n)return!1;var r=t.slice(0),o=n.slice(0);return r.sort(),o.sort(),e.arrayEquals(r,o)},e.compareStrings=function(t,e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!1),t&&e?(n&&(r?(t=t.toLocaleLowerCase(),e=e.toLocaleLowerCase()):(t=t.toLowerCase(),e=e.toLowerCase())),t===e):!1},e.groupBy=function(t,e){var n=[],r={};return t.forEach(function(t){var o=e(t),i=r[o];i||(i={"key":o,"items":[]},r[o]=i,n.push(i)),i.items.push(t)}),n},e.htmlEncode=function(t){return $("<div/>").text(t).html()},e.isInDOM=function(t){return t&&$.contains(document.documentElement,t instanceof $?t[0]:t)},e.log=function(e,n){t.Current.isLoggingEnabled&&(console.log(e+": "+n),"string"!=typeof n&&console.log(n))},e.noNavClick=function(t,e){return t.preventDefault(),e(),!1},e.buildPopup=function(t){var e="close this popup (or hit Esc)",n=$('\n<div class="popup '+t.popupCssClasses+'">\n    <div class="popup-close"><a title="'+e+'">&times;</a></div>\n    <h2 class="handle">'+t.headerText+'</h2>\n    <div class="popup-body"></div>\n    <div class="popup-footer"></div>\n</div>');return n.find(".popup-body").append(t.popupBody),n},e.showError=function(t){if(!t||!t.$target||!t.$target.length)throw new Error("opts.$target is required");var e=null;t.xhr&&(e=StackExchange.helpers.getLikelyErrorMessage(t.xhr)),!e&&t.msg&&(e=t.msg),t.$target.showErrorMessage(e||"An error has occurred - please try your action again.")},e.initModal=function(t){var n="initModal";t.data(n)||($(".js-modal-close").click(function(){e.toggleModal(t,!1)}).find(".js-modal-dialog").click(function(t){t.preventDefault(),t.stopPropagation()}),$(document).keydown(function(n){27==n.which&&e.toggleModal(t,!1)}),t.data(n,!0))},e.toggleModal=function(t,e){$("body").attr({"aria-hidden":e?"true":"false","tabindex":e?"-1":"0"}),t.attr({"aria-hidden":e?"false":"true","tabindex":e?"0":"1"})},e}();t.Util=e}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));var StackOverflow;!function(t){var e;!function(t){var e=function(){function t(){}return t.createValidatorsForForm=function(e,n){void 0===n&&(n=t.createValidators);var r={};return $("input,select",e).each(function(){if(this.name){var t=this.name.replace(".","\\\\."),e=n(this);e&&(r[t]=e)}}),r},t.createValidators=function(t){var e=this.coerceTo$(t),n={};return e.is("[required]")&&(n.presence={"message":"This field is required","allowEmpty":!1},e.is("[type=checkbox]")&&(n.inclusion={"within":[!0],"message":"This field is required"})),e.is("[type=email]")&&(n.email={"message":"This does not look like a valid email address"}),$.isEmptyObject(n)?null:n},t.IsValidationError=function(t,e){void 0===e&&(e="has-error");var n=this.coerceTo$(t),r=n.closest(".js-validation-container");return r.hasClass(e)},t.ClearValidationError=function(t,e){void 0===e&&(e="has-error");var n=this.coerceTo$(t);n.closest(".js-validation-container").removeClass(e),n.siblings(".js-svg-error").addClass("d-none")},t.AssignStacksErrorToParent=function(t,e,n,r){function o(t){t.is("select")&&t.closest(".s-select").toggleClass(r,!e),t.siblings(".js-svg-error").toggleClass("d-none",e)}void 0===n&&(n=""),void 0===r&&(r="has-error");var i=this.coerceTo$(t),a=i.closest(".js-validation-container"),s=a.find(".s-input-message");a.toggleClass(r,!e),n?s.text(e?"":n):s.text("");var c=i.data("stacks-validation-group");c&&(i=i.add(a.find('[data-stacks-validation-group="'+c+'"]').not(i))),i.each(function(t,e){return o($(e))})},t.coerceTo$=function(t){return t instanceof Element?$(t):t},t}();t.Validation=e}(e=t.Scripts||(t.Scripts={}))}(StackOverflow||(StackOverflow={}));